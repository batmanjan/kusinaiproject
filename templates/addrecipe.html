<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Recipe</title>
    {% load static %}
    {% load custom_filters %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">KusinAIready</div>
            <div class="nav-menu">
                <button class="burger-menu">â˜°</button>
                <div class="nav-links">
                    <a href="{% url 'home' %}">Home</a>
                    <a href="{% url 'saved' %}">Saved</a>
                    <a href="{% url 'cooked' %}">Cooked</a>
                    <a href="{% url 'settings' %}">Settings</a>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <h1 class="settings-title">Add Recipe</h1>
        <form id="recipe-form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Add Recipe</button>
        </form>
        <script>
            document.getElementById('recipe-form').addEventListener('submit', function(event) {
                let form = event.target;
                let isValid = true;

                // Check if all required fields are filled
                form.querySelectorAll('input, textarea, select').forEach(function(input) {
                    if (input.required && !input.value.trim()) {
                        isValid = false;
                    }
                });

                if (!isValid) {
                    event.preventDefault();
                    alert('OOPS! Please enter all recipe details');
                } else {
                    alert('Thank you for adding your recipe! Please wait till your recipe is approved and will be available for everyone!');
                }
            });
        </script>
    </main>
    <footer>
        <div class="footer-left">KusinAIready</div>
        <div class="footer-right">
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'saved' %}">Saved</a>
            <a href="{% url 'about' %}">About Us</a>
            <a href="{% url 'settings' %}">Settings</a>
            <a href="{% url 'faqs' %}">FAQs</a>
            <a href="{% url 'terms' %}">Terms of Use</a>
            <a href="{% url 'tutorial' %}">How to Use?</a>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const addCommaOnEnter = (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    const target = event.target;
                    const value = target.value.trim();
                    if (value && !value.endsWith(',')) {
                        // Add a comma and move to the next line
                        target.value = value + ',\n';
                    } else if (value.endsWith(',')) {
                        // Just move to the next line without adding another comma
                        target.value = value + '\n';
                    }
                }
            };
        
            const removeTrailingComma = (event) => {
                const target = event.target;
                if (target.value.trim().endsWith(',')) {
                    // Remove the trailing comma if it exists
                    target.value = target.value.trim().slice(0, -1);
                }
            };
        
            const ingredientInput = document.querySelector('textarea[name="ingredient_list"]');
            const procedureInput = document.querySelector('textarea[name="procedure"]');
        
            if (ingredientInput) {
                ingredientInput.addEventListener('keydown', addCommaOnEnter);
                ingredientInput.addEventListener('blur', removeTrailingComma);
            }
        
            if (procedureInput) {
                procedureInput.addEventListener('keydown', addCommaOnEnter);
                procedureInput.addEventListener('blur', removeTrailingComma);
            }
        });
        
        </script>
        
        
</body>
</html>
